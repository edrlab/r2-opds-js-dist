{"version":3,"file":"opds2.js","sourceRoot":"","sources":["../../../../../src/opds/opds2/opds2.ts"],"names":[],"mappings":"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","sourcesContent":["// ==LICENSE-BEGIN==\n// Copyright 2017 European Digital Reading Lab. All rights reserved.\n// Licensed to the Readium Foundation under one or more contributor license agreements.\n// Use of this source code is governed by a BSD-style license\n// that can be found in the LICENSE file exposed on Github (readium) in the project repository.\n// ==LICENSE-END==\n\n// https://github.com/edcarroll/ta-json\nimport {\n    JsonConverter, JsonElementType, JsonObject, JsonProperty, OnDeserialized,\n} from \"ta-json-x\";\n\nimport { JsonStringConverter } from \"@r2-utils-js/_utils/ta-json-string-converter\";\n\nimport { OPDSFacet } from \"./opds2-facet\";\nimport { OPDSGroup } from \"./opds2-group\";\nimport { OPDSLink } from \"./opds2-link\";\nimport { OPDSMetadata } from \"./opds2-metadata\";\nimport { OPDSPublication } from \"./opds2-publication\";\n\n// application/opds+json\n\nconst METADATA_JSON_PROP = \"metadata\";\nconst FACETS_JSON_PROP = \"facets\";\nconst GROUPS_JSON_PROP = \"groups\";\nconst CATALOGS_JSON_PROP = \"catalogs\";\nconst PUBLICATIONS_JSON_PROP = \"publications\";\nconst LINKS_JSON_PROP = \"links\";\nconst NAVIGATION_JSON_PROP = \"navigation\";\n\n@JsonObject()\nexport class OPDSFeed {\n\n    // TODO: not in JSON Schema?? https://github.com/opds-community/drafts/issues/23\n    // tslint:disable-next-line:max-line-length\n    // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json\n    @JsonProperty(\"@context\")\n    @JsonElementType(String)\n    @JsonConverter(JsonStringConverter)\n    public Context!: string[];\n\n    // tslint:disable-next-line:max-line-length\n    // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L7\n    @JsonProperty(METADATA_JSON_PROP)\n    public Metadata!: OPDSMetadata;\n\n    // tslint:disable-next-line:max-line-length\n    // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L11\n    @JsonProperty(LINKS_JSON_PROP)\n    @JsonElementType(OPDSLink)\n    public Links!: OPDSLink[];\n\n    // tslint:disable-next-line:max-line-length\n    // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L40\n    @JsonProperty(PUBLICATIONS_JSON_PROP)\n    @JsonElementType(OPDSPublication)\n    public Publications!: OPDSPublication[];\n\n    // tslint:disable-next-line:max-line-length\n    // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L48\n    @JsonProperty(NAVIGATION_JSON_PROP)\n    @JsonElementType(OPDSLink)\n    public Navigation!: OPDSLink[];\n\n    // tslint:disable-next-line:max-line-length\n    // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L66\n    @JsonProperty(FACETS_JSON_PROP)\n    @JsonElementType(OPDSFacet)\n    public Facets!: OPDSFacet[];\n\n    // tslint:disable-next-line:max-line-length\n    // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L86\n    @JsonProperty(GROUPS_JSON_PROP)\n    @JsonElementType(OPDSGroup)\n    public Groups!: OPDSGroup[];\n\n    // https://libraryregistry.librarysimplified.org/libraries\n    @JsonProperty(CATALOGS_JSON_PROP)\n    @JsonElementType(OPDSPublication)\n    public Catalogs!: OPDSPublication[];\n\n    public findFirstLinkByRel(rel: string): OPDSLink | undefined {\n\n        return this.Links ? this.Links.find((l) => {\n            return l.HasRel(rel);\n        }) : undefined;\n    }\n\n    public AddLink(href: string, rel: string, typeLink: string, templated: boolean) {\n        const l = new OPDSLink();\n        l.Href = href;\n        l.AddRel(rel);\n        l.TypeLink = typeLink;\n        if (templated) {\n            l.Templated = true;\n        }\n        if (!this.Links) {\n            this.Links = [];\n        }\n        this.Links.push(l);\n    }\n\n    public AddNavigation(title: string, href: string, rel: string, typeLink: string) {\n        const l = new OPDSLink();\n        l.Href = href;\n        l.TypeLink = typeLink;\n        l.AddRel(rel);\n        if (title) {\n            l.Title = title;\n        }\n        if (!this.Navigation) {\n            this.Navigation = [];\n        }\n        this.Navigation.push(l);\n    }\n\n    public AddPagination(\n        numberItems: number, itemsPerPage: number, currentPage: number,\n        nextLink: string, prevLink: string,\n        firstLink: string, lastLink: string) {\n\n        if (!this.Metadata) {\n            this.Metadata = new OPDSMetadata();\n        }\n        this.Metadata.CurrentPage = currentPage;\n        this.Metadata.ItemsPerPage = itemsPerPage;\n        this.Metadata.NumberOfItems = numberItems;\n\n        if (nextLink) {\n            this.AddLink(nextLink, \"next\", \"application/opds+json\", false);\n        }\n        if (prevLink) {\n            this.AddLink(prevLink, \"previous\", \"application/opds+json\", false);\n        }\n        if (firstLink) {\n            this.AddLink(firstLink, \"first\", \"application/opds+json\", false);\n        }\n        if (lastLink) {\n            this.AddLink(lastLink, \"last\", \"application/opds+json\", false);\n        }\n    }\n\n    public AddFacet(link: OPDSLink, group: string) {\n\n        if (this.Facets) {\n            const found = this.Facets.find((f) => {\n                if (f.Metadata && f.Metadata.Title === group) {\n                    if (!f.Links) {\n                        f.Links = [];\n                    }\n                    f.Links.push(link);\n                    return true;\n                }\n                return false;\n            });\n            if (found) {\n                return;\n            }\n        }\n\n        const facet = new OPDSFacet();\n\n        facet.Metadata = new OPDSMetadata();\n        facet.Metadata.Title = group;\n\n        facet.Links = [];\n        facet.Links.push(link);\n\n        if (!this.Facets) {\n            this.Facets = [];\n        }\n        this.Facets.push(facet);\n    }\n\n    public AddPublicationInGroup(publication: OPDSPublication, collLink: OPDSLink) {\n\n        if (this.Groups) {\n            const found1 = this.Groups.find((g) => {\n                if (g.Links) {\n                    const found2 = g.Links.find((l) => {\n\n                        if (l.Href === collLink.Href) {\n                            if (!g.Publications) {\n                                g.Publications = [];\n                            }\n                            g.Publications.push(publication);\n                            return true;\n                        }\n                        return false;\n                    });\n                    if (found2) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n\n            if (found1) {\n                return;\n            }\n        }\n\n        const group = new OPDSGroup();\n        group.Metadata = new OPDSMetadata();\n        group.Metadata.Title = collLink.Title;\n\n        group.Publications = [];\n        group.Publications.push(publication);\n\n        const linkSelf = new OPDSLink();\n        linkSelf.AddRel(\"self\");\n        linkSelf.Title = collLink.Title;\n        linkSelf.Href = collLink.Href;\n\n        group.Links = [];\n        group.Links.push(linkSelf);\n\n        if (!this.Groups) {\n            this.Groups = [];\n        }\n        this.Groups.push(group);\n    }\n\n    public AddNavigationInGroup(link: OPDSLink, collLink: OPDSLink) {\n\n        if (this.Groups) {\n            const found1 = this.Groups.find((g) => {\n                if (g.Links) {\n                    const found2 = g.Links.find((l) => {\n\n                        if (l.Href === collLink.Href) {\n                            if (!g.Navigation) {\n                                g.Navigation = [];\n                            }\n                            g.Navigation.push(link);\n                            return true;\n                        }\n                        return false;\n                    });\n                    if (found2) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n\n            if (found1) {\n                return;\n            }\n        }\n\n        const group = new OPDSGroup();\n        group.Metadata = new OPDSMetadata();\n        group.Metadata.Title = collLink.Title;\n\n        group.Navigation = [];\n        group.Navigation.push(link);\n\n        const linkSelf = new OPDSLink();\n        linkSelf.AddRel(\"self\");\n        linkSelf.Title = collLink.Title;\n        linkSelf.Href = collLink.Href;\n\n        group.Links = [];\n        group.Links.push(link);\n\n        if (!this.Groups) {\n            this.Groups = [];\n        }\n        this.Groups.push(group);\n    }\n\n    @OnDeserialized()\n    // tslint:disable-next-line:no-unused-variable\n    // @ts-ignore: TS6133 (is declared but its value is never read.)\n    protected _OnDeserialized() {\n        // tslint:disable-next-line:max-line-length\n        // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L121\n        if (!this.Metadata) {\n            console.log(\"OPDS2Feed.Metadata is not set!\");\n        }\n        // tslint:disable-next-line:max-line-length\n        // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L122\n        if (!this.Links) {\n            console.log(\"OPDS2Feed.Links is not set!\");\n        }\n        // tslint:disable-next-line:max-line-length\n        // https://github.com/opds-community/drafts/blob/2d027051a725ae62defdc7829b597564e5b8e9e5/schema/feed.schema.json#L127\n        if (!this.Publications && !this.Navigation && !this.Groups && !this.Catalogs) {\n            console.log(\"One of OPDS2Feed.Publications|Navigation|Groups|Catalogs must be set!\");\n        }\n    }\n}\n"]}