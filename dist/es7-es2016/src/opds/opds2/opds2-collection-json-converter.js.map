{"version":3,"file":"opds2-collection-json-converter.js","sourceRoot":"","sources":["../../../../../src/opds/opds2/opds2-collection-json-converter.ts"],"names":[],"mappings":";;AAOA,qCAIiB;AAEjB,yDAAoD;AAEpD;IACW,SAAS,CAAC,QAAwB;QAGrC,OAAO,cAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IACtC,CAAC;IAEM,WAAW,CAAC,KAAgB;QAQ/B,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC3B,MAAM,CAAC,GAAG,IAAI,iCAAc,EAAE,CAAC;YAC/B,CAAC,CAAC,IAAI,GAAG,KAAe,CAAC;YACzB,OAAO,CAAC,CAAC;SACZ;aAAM;YACH,OAAO,cAAM,CAAC,WAAW,CAAiB,KAAK,EAAE,iCAAc,CAAC,CAAC;SACpE;IACL,CAAC;IAEM,2BAA2B;QAC9B,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AA3BD,kEA2BC","sourcesContent":["// ==LICENSE-BEGIN==\n// Copyright 2017 European Digital Reading Lab. All rights reserved.\n// Licensed to the Readium Foundation under one or more contributor license agreements.\n// Use of this source code is governed by a BSD-style license\n// that can be found in the LICENSE file exposed on Github (readium) in the project repository.\n// ==LICENSE-END==\n\nimport {\n    IPropertyConverter,\n    JSON as TAJSON,\n    JsonValue,\n} from \"ta-json\";\n\nimport { OPDSCollection } from \"./opds2-collection\";\n\nexport class JsonOPDSCollectionConverter implements IPropertyConverter {\n    public serialize(property: OPDSCollection): JsonValue {\n        // console.log(\"JsonOPDSCollectionConverter.serialize()\");\n\n        return TAJSON.serialize(property);\n    }\n\n    public deserialize(value: JsonValue): OPDSCollection {\n        // console.log(\"JsonOPDSCollectionConverter.deserialize()\");\n\n        // if (value instanceof Array) {\n        //     return value.map((v) => {\n        //         return this.deserialize(v);\n        //     }) as OPDSCollection[];\n        // } else\n        if (typeof value === \"string\") {\n            const c = new OPDSCollection();\n            c.Name = value as string;\n            return c;\n        } else {\n            return TAJSON.deserialize<OPDSCollection>(value, OPDSCollection);\n        }\n    }\n\n    public collapseArrayWithSingleItem(): boolean {\n        return true;\n    }\n}\n"]}